window.gLocalAssetContainer["node_modules/@akashic-extension/akashic-timeline/lib/Tween.js"] = function(g) { !function(t,e,i,s,n){"use strict";var r=e("./Easing"),o=e("./ActionType"),a=function(){function t(t,e){this._target=t,this._stepIndex=0,this._loop=!!e&&!!e.loop,this._modifiedHandler=e&&e.modified?e.modified:void 0,this._destroyedHandler=e&&e.destroyed?e.destroyed:void 0,this._steps=[],this._lastStep=void 0,this._pararel=!1,this.paused=!1}return t.prototype.to=function(t,e,i){void 0===i&&(i=r.linear);var s={input:t,duration:e,easing:i,type:o.TweenTo,initialized:!1};return this._push(s),this},t.prototype.by=function(t,e,i,s){void 0===i&&(i=r.linear),void 0===s&&(s=!1);var n=s?o.TweenByMult:o.TweenBy,a={input:t,duration:e,easing:i,type:n,initialized:!1};return this._push(a),this},t.prototype.con=function(){return this._pararel=!0,this},t.prototype.wait=function(t){var e={duration:t,type:o.Wait,initialized:!1};return this._push(e),this},t.prototype.call=function(t){var e={func:t,type:o.Call,duration:0,initialized:!1};return this._push(e),this},t.prototype.pause=function(){var t=this;return this.call(function(){t.paused=!0})},t.prototype.cue=function(t){var e=Object.keys(t);e.sort(function(t,e){return Number(t)>Number(e)?1:-1});for(var i=[],s=0;s<e.length;++s)i.push({time:Number(e[s]),func:t[e[s]]});var n={type:o.Cue,duration:Number(e[e.length-1]),cue:i,initialized:!1};return this._push(n),this},t.prototype.every=function(t,e,i){void 0===i&&(i=r.linear);var s={func:t,type:o.Every,easing:i,duration:e,initialized:!1};return this._push(s),this},t.prototype.fadeIn=function(t,e){return void 0===e&&(e=r.linear),this.to({opacity:1},t,e)},t.prototype.fadeOut=function(t,e){return void 0===e&&(e=r.linear),this.to({opacity:0},t,e)},t.prototype.moveTo=function(t,e,i,s){return void 0===s&&(s=r.linear),this.to({x:t,y:e},i,s)},t.prototype.moveBy=function(t,e,i,s){return void 0===s&&(s=r.linear),this.by({x:t,y:e},i,s)},t.prototype.moveX=function(t,e,i){return void 0===i&&(i=r.linear),this.to({x:t},e,i)},t.prototype.moveY=function(t,e,i){return void 0===i&&(i=r.linear),this.to({y:t},e,i)},t.prototype.rotateTo=function(t,e,i){return void 0===i&&(i=r.linear),this.to({angle:t},e,i)},t.prototype.rotateBy=function(t,e,i){return void 0===i&&(i=r.linear),this.by({angle:t},e,i)},t.prototype.scaleTo=function(t,e,i,s){return void 0===s&&(s=r.linear),this.to({scaleX:t,scaleY:e},i,s)},t.prototype.scaleBy=function(t,e,i,s){return void 0===s&&(s=r.linear),this.by({scaleX:t,scaleY:e},i,s,!0)},t.prototype.destroyed=function(){var t=!1;return this._destroyedHandler&&(t=this._destroyedHandler.call(this._target)),t||(t=this._stepIndex>=this._steps.length&&!this._loop),t},t.prototype._fire=function(t){if(0!==this._steps.length&&!this.destroyed()&&!this.paused){if(this._stepIndex>=this._steps.length){if(!this._loop)return;this._stepIndex=0}for(var e=this._steps[this._stepIndex],i=!1,s=0;s<e.length;++s){var n=e[s];if(n.initialized||this._initAction(n),!n.finished){switch(n.elapsed+=t,n.type){case o.Call:n.func.call(this._target);break;case o.Every:var r=n.easing(n.elapsed,0,1,n.duration);r>1&&(r=1),n.func.call(this._target,n.elapsed,r);break;case o.TweenTo:case o.TweenBy:case o.TweenByMult:for(var a=Object.keys(n.goal),p=0;p<a.length;++p){var d=a[p];n.elapsed>=n.duration?this._target[d]=n.goal[d]:this._target[d]=n.easing(n.elapsed,n.start[d],n.goal[d]-n.start[d],n.duration)}break;case o.Cue:var h=n.cue[n.cueIndex];void 0!==h&&n.elapsed>=h.time&&(h.func.call(this._target),++n.cueIndex)}this._modifiedHandler&&this._modifiedHandler.call(this._target),n.elapsed>=n.duration?n.finished=!0:i=!0}}if(!i){for(var u=0;u<e.length;++u)e[u].initialized=!1;++this._stepIndex}}},t.prototype.serializeState=function(){for(var t={_stepIndex:this._stepIndex,_steps:[]},e=0;e<this._steps.length;++e){t._steps[e]=[];for(var i=0;i<this._steps[e].length;++i)t._steps[e][i]={input:this._steps[e][i].input,start:this._steps[e][i].start,goal:this._steps[e][i].goal,duration:this._steps[e][i].duration,elapsed:this._steps[e][i].elapsed,type:this._steps[e][i].type,cueIndex:this._steps[e][i].cueIndex,initialized:this._steps[e][i].initialized,finished:this._steps[e][i].finished}}return t},t.prototype.deserializeState=function(t){this._stepIndex=t._stepIndex;for(var e=0;e<t._steps.length;++e)for(var i=0;i<t._steps[e].length;++i)t._steps[e][i]&&this._steps[e][i]&&(this._steps[e][i].input=t._steps[e][i].input,this._steps[e][i].start=t._steps[e][i].start,this._steps[e][i].goal=t._steps[e][i].goal,this._steps[e][i].duration=t._steps[e][i].duration,this._steps[e][i].elapsed=t._steps[e][i].elapsed,this._steps[e][i].type=t._steps[e][i].type,this._steps[e][i].cueIndex=t._steps[e][i].cueIndex,this._steps[e][i].initialized=t._steps[e][i].initialized,this._steps[e][i].finished=t._steps[e][i].finished)},t.prototype._push=function(t){if(this._pararel)this._lastStep.push(t);else{var e=this._steps.push([t])-1;this._lastStep=this._steps[e]}this._pararel=!1},t.prototype._initAction=function(t){if(t.elapsed=0,t.start={},t.goal={},t.cueIndex=0,t.finished=!1,t.initialized=!0,t.type===o.TweenTo||t.type===o.TweenBy||t.type===o.TweenByMult)for(var e=Object.keys(t.input),i=0;i<e.length;++i){var s=e[i];void 0!==this._target[s]&&(t.start[s]=this._target[s],t.type===o.TweenTo?t.goal[s]=t.input[s]:t.type===o.TweenBy?t.goal[s]=t.start[s]+t.input[s]:t.type===o.TweenByMult&&(t.goal[s]=t.start[s]*t.input[s]))}},t}();i.exports=a}(g.module.exports,g.module.require,g.module,g.filename,g.dirname);}