window.gLocalAssetContainer["node_modules/cowlick-engine/lib/components/GameStateHelper.js"] = function(g) { !function(e,a,r,t,i){"use strict";function n(e,a,r){for(var t={builtin:{},system:{},current:{}},i=[],n=0,s=a;n<s.length;n++)for(var o=s[n],l=function(e){var a="number"==typeof e.data?e.data:JSON.parse(e.data);if(o.regionKey===m.Region.system)t.system=a;else{var r=i.find(function(a){return a.key===e.storageKey}),n=o.regionKey.split(".");if(!r){var s=parseInt(n[0].substring(v),10);r={key:e.storageKey,value:{label:"",variables:{},logs:[]}},i[s]=r}var l=n[n.length-1];switch(l){case"label":r.value.label=a;break;case"logs":r.value.logs=a;break;case"description":r.value.description=a;break;default:r.value.variables=a}}},u=0,g=e.storageValues.get(o);u<g.length;u++){var d=g[u];l(d)}return{data:i.map(function(e){return e.value}),variables:t,max:r}}function s(e,a,r,t){for(var i=r.system.maxSaveCount,s=n(e,a,i),o=[[u.BuiltinVariable.selectedFont,0],[u.BuiltinVariable.autoMode,!1],[u.BuiltinVariable.autoMessageDuration,r.system.autoMessageDuration],[u.BuiltinVariable.messageSpeed,r.system.messageSpeed],[u.BuiltinVariable.realTimeDisplay,r.system.realTimeDisplay],[u.BuiltinVariable.fontSize,r.font.size],[u.BuiltinVariable.fontColor,r.font.color],[u.BuiltinVariable.alreadyRead,{}]],g=0,m=o;g<m.length;g++){var v=m[g],b=v[0],c=v[1];b in s.variables.builtin||(s.variables.builtin[b]=c)}return new d.GameState(l({},s,{scenario:t}))}function o(e,a){for(var r=[{region:g.StorageRegion.Values,regionKey:m.Region.system,userId:e.id,gameId:m.gameId},{region:g.StorageRegion.Values,regionKey:m.Region.builtin,userId:e.id,gameId:m.gameId}],t=0;a-1>t;t++)r.push({region:g.StorageRegion.Values,regionKey:m.Region.saveDataPrefix+t,userId:e.id,gameId:m.gameId});return r}var l=this&&this.__assign||Object.assign||function(e){for(var a,r=1,t=arguments.length;t>r;r++){a=arguments[r];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e};Object.defineProperty(e,"__esModule",{value:!0});var u=a("cowlick-core"),d=a("../models/GameState"),m=a("../Constant"),v=m.Region.saveDataPrefix.length;e.loadGameState=s,e.createStorageKeys=o}(g.module.exports,g.module.require,g.module,g.filename,g.dirname);}