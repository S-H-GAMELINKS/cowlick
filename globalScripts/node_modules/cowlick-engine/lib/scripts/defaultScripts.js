window.gLocalAssetContainer["node_modules/cowlick-engine/lib/scripts/defaultScripts.js"] = function(g) { !function(e,a,n,t,r){"use strict";function i(e,a){var n=e.current;n.appendLayer(Y.createImage(n,a),a.layer),n.applyLayerConfig({name:a.layer.name,opacity:a.layer.opacity,visible:a.layer.visible})}function o(e,a){var n=e.current,t=new g.Pane({scene:n,width:a.width,height:a.height,x:a.layer.x,y:a.layer.y,backgroundImage:a.backgroundImage?n.assets[a.backgroundImage]:void 0,padding:a.padding,backgroundEffector:a.backgroundEffector?new g.NinePatchSurfaceEffector(n.game,a.backgroundEffector.borderWidth):void 0});t.touchable=!!a.touchable,n.appendLayer(t,a.layer)}function c(e,a){e.jump(a)}function u(e,a){var n=Q.ImageButton.create(e.current,a.image);n.move(a.x,a.y),n.onClick.add(function(){for(var n=0,t=a.scripts;n<t.length;n++){var r=t[n];ee.Engine.scriptManager.call(e,r)}}),e.current.appendLayer(n,a.image.layer)}function l(e,a){for(var n=e.game,t=a.values.length,r=a.width?a.width:n.width/4*3,i=a.height?a.height:32,o=10,c=a.x?a.x:r/6,u=a.y?a.y:(n.height/3*2-i*t-o*(t-1))/2,l=0,d=function(t){if(t.path){var d=g._require(n,t.path);if(!d(e.current.gameState.variables))return"continue"}var s=new X.LabelButton({scene:e.current,width:r,height:i,backgroundImage:a.backgroundImage,padding:a.padding,backgroundEffector:a.backgroundEffector,text:t.text,config:ee.Engine.config,gameState:e.current.gameState});s.onClick.add(function(){ee.Engine.scriptManager.call(e,t)});var f=a.direction?a.direction:0;switch(f){case 0:s.move(c,u+(i+o)*l);break;case 1:s.move(c+(r+o)*l,u)}e.current.appendLayer(s,a.layer),l++},s=0,f=a.values;s<f.length;s++){var p=f[s];d(p)}}function d(e,a){var n=(e.game,{scene:e,width:a.width,height:a.height,backgroundImage:a.backgroundImage,padding:a.padding,backgroundEffector:a.backgroundEffector,text:a.text,config:ee.Engine.config,gameState:e.gameState});a.fontSize&&(n.fontSize=a.fontSize);var t=new X.LabelButton(n);return t.move(a.layer.x,a.layer.y),t}function s(e,a){for(var n=d(e.current,a),t=function(a){n.onClick.add(function(){ee.Engine.scriptManager.call(e,a)})},r=0,i=a.scripts;r<i.length;r++){var o=i[r];t(o)}e.current.appendLayer(n,a.layer)}function f(e,a){e.current.updateText(a)}function p(e,a){e.current.applyLayerConfig(a)}function m(e,a){e.current.playAudio(a)}function h(e,a){e.current.changeVolume(a)}function v(e,a){e.current.stopAudio(a)}function y(e,a){e.current.playVideo(a)}function b(e,a){e.current.stopVideo(a)}function T(e,a){var n=e.current;n.pointUpCapture.addOnce(function(){for(var n=0,t=a;n<t.length;n++){var r=t[n];ee.Engine.scriptManager.call(e,r)}},n)}function k(e,a){e.current.requestNextFrame()}function S(e,a){switch(a){case 1:e.current.disableWindowClick();break;case 0:e.current.enableWindowClick()}}function w(e,a){e.save(a)}function x(e,a){e.load(a)}function E(e,a){var n=g._require(e.game,a.path);n(e.current.gameState.variables)}function V(e,a){var n=g._require(e.game,a.path);if(n(e.current.gameState.variables)){for(var t=0,r=a.scripts;t<r.length;t++){var i=r[t];ee.Engine.scriptManager.call(e,i)}return!0}return!1}function L(e,a){for(var n={name:K.Layer.backlog},t=0,r=a.scripts;t<r.length;t++){var i=r[t];ee.Engine.scriptManager.call(e,i)}var o=e.current,c=o.enabledWindowClick;c&&S(e,1);var g=new H.Scrollable({scene:o,x:20,y:50,width:e.game.width-50,height:e.game.height-70,vertical:!0,horizontal:!1});o.appendLayer(g,n);for(var u=new $.Message({scene:o,config:ee.Engine.config,width:e.game.width-60,x:0,y:0,gameState:o.gameState}),l={values:[]},d=0,f=e.backlog;d<f.length;d++){var p=f[d];p.text&&(0!==l.values.length?l.values.push("\n",p.text):l.values.push(p.text))}u.updateText(l),u.showAll(),g.content.append(u);var m=[{tag:K.Tag.removeLayer,data:{name:n.name}}];c&&m.push({tag:K.Tag.trigger,data:0});var h=80,v={layer:{name:n.name,x:e.game.width-h-10,y:20},width:h,height:24,text:"close",scripts:m};s(e,v)}function M(e,a){e.current.removeLayer(a.name)}function I(e,a){e.current.gameState.variables.system={}}function C(e,a){e.current.gameState.variables.current={}}function B(e,a){e.current.transition(a.layer,function(n){var t=new G.Timeline(e.current);t.create(n,{modified:n.modified,destroyed:n.destroyed}).fadeIn(a.duration)})}function z(e,a){e.current.transition(a.layer,function(n){var t=new G.Timeline(e.current);t.create(n,{modified:n.modified,destroyed:n.destroyed}).fadeOut(a.duration)})}function P(e,a){e.current.setTimeout(function(){for(var n=0,t=a.scripts;n<t.length;n++){var r=t[n];ee.Engine.scriptManager.call(e,r)}},a.milliseconds)}function A(e,a){for(var n=0,t=a.conditions;n<t.length;n++){var r=t[n];if(V(e,r))return}for(var i=0,o=a.elseBody;i<o.length;i++){var c=o[i];ee.Engine.scriptManager.call(e,c)}}function q(e,a){e.game.logger.warn(a.message,a.data)}function _(e,a){var n=new Z.Slider({scene:e.current,width:0,height:0,x:a.layer.x,y:a.layer.y,data:a,state:e.current.gameState});e.current.appendLayer(n,a.layer)}function O(e,a){e.current.gameState.getValue({type:K.VariableType.builtin,name:K.BuiltinVariable.autoMode})&&e.current.setAutoTrigger()}function W(e,a){e.closeSaveLoadScene()}function j(e,a,n){var t,r=e.openSaveLoadScene();switch(a.button){case K.Position.Top:t=J.Position.Top;break;case K.Position.Bottom:t=J.Position.Bottom}var i=new J.Pagination({scene:r,x:20,y:40,width:r.game.width-40,height:r.game.height-50,limit:{vertical:a.vertical,horizontal:a.horizontal},position:t,paddingRight:a.padding,first:!0,last:!0});r.append(i);for(var o=function(t){var o={layer:a.base.layer,width:a.base.width,height:a.base.height,backgroundImage:a.base.backgroundImage,padding:a.base.padding,backgroundEffector:a.base.backgroundEffector,text:String(t),scripts:n(t)},c=d(r,o);c.onClick.add(function(){for(var a=0,n=o.scripts;a<n.length;a++){var t=n[a];ee.Engine.scriptManager.call(e,t)}}),i.content.append(c)},c=0;c<ee.Engine.config.system.maxSaveCount;c++)o(c)}function D(e,a){j(e,a,function(e){return[{tag:K.Tag.save,data:{index:e,force:!0}}]})}function F(e,a){j(e,a,function(e){return[{tag:ae,data:{}},{tag:K.Tag.load,data:{index:e}}]})}function N(e,a){e.current.gameState.setValue({type:K.VariableType.builtin,name:K.BuiltinVariable.messageSpeed},a.speed),e.current.applyMessageSpeed()}function R(e,a){a.size&&e.current.gameState.setValue({type:K.VariableType.builtin,name:K.BuiltinVariable.fontSize},"default"===a.size?ee.Engine.config.font.size:a.size),a.color&&e.current.gameState.setValue({type:K.VariableType.builtin,name:K.BuiltinVariable.fontColor},"default"===a.color?ee.Engine.config.font.color:a.color),e.current.applyFontSetting()}function U(e,a){e.current.gameState.setValue({type:K.VariableType.builtin,name:K.BuiltinVariable.realTimeDisplay},a.enabled)}Object.defineProperty(e,"__esModule",{value:!0});var G=a("@akashic-extension/akashic-timeline"),H=a("@xnv/akashic-scrollable"),J=a("@pocketberserker/akashic-pagination"),K=a("cowlick-core"),Q=a("../components/ImageButton"),X=a("../components/LabelButton"),Y=a("../components/Image"),Z=a("../components/Slider"),$=a("../components/Message"),ee=a("../Engine");e.autoMode=O;var ae="closeLoadScene";e.defaultScripts=new Map([[K.Tag.image,i],[K.Tag.pane,o],[K.Tag.jump,c],[K.Tag.button,u],[K.Tag.choice,l],[K.Tag.link,s],[K.Tag.text,f],[K.Tag.layerConfig,p],[K.Tag.playAudio,m],[K.Tag.stopAudio,v],[K.Tag.playVideo,y],[K.Tag.changeVolume,h],[K.Tag.stopVideo,b],[K.Tag.click,T],[K.Tag.skip,k],[K.Tag.trigger,S],[K.Tag.save,w],[K.Tag.load,x],[K.Tag.evaluate,E],[K.Tag.condition,V],[K.Tag.backlog,L],[K.Tag.removeLayer,M],[K.Tag.clearSystemVariables,I],[K.Tag.clearCurrentVariables,C],[K.Tag.fadeIn,B],[K.Tag.fadeOut,z],[K.Tag.timeout,P],[K.Tag.ifElse,A],[K.Tag.exception,q],[K.Tag.slider,_],[K.Tag.autoMode,O],[ae,W],[K.Tag.openSaveScene,D],[K.Tag.openLoadScene,F],[K.Tag.messageSpeed,N],[K.Tag.font,R],[K.Tag.realTimeDisplay,U]])}(g.module.exports,g.module.require,g.module,g.filename,g.dirname);}