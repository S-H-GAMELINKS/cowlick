window.gLocalAssetContainer["node_modules/cowlick-core/lib/Scenario.js"] = function(g) { !function(e,t,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("./GameError"),s=function(){function e(e){this.index=0,this.scenes=e,this.onLoaded=new g.Trigger,this.logs=[]}return Object.defineProperty(e.prototype,"backlog",{get:function(){return this.logs},set:function(e){this.logs=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){if(this.index<this.scenes.length)return this.scenes[this.index];throw new o.GameError("scene not found",{index:this.index})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this.scene.frame},enumerable:!0,configurable:!0}),e.prototype.update=function(e,t){var n=this.scenes.findIndex(function(e){return e.label===t.label});return n>-1?(this.index=n,void this.scenes[this.index].reset(t.frame)):(this.scenes.push(g._require(e,t.label)),void(this.index=this.scenes.length-1))},e.prototype.load=function(){var e=this.frame;if(!e)throw new o.GameError("frame not found",this.scene.index);this.pushLog(this.scene.index),this.onLoaded.fire(e)},e.prototype.next=function(){this.scene.next(),this.load()},e.prototype.findScene=function(e,t){var n=this.scenes.find(function(e){return e.label===t.label});return n?n:(n=g._require(e,t.label),n&&this.scenes.push(n),n)},e.prototype.clear=function(){this.logs=[],this.onLoaded.removeAll()},e.prototype.pushTextLog=function(e){var t=this.scene.index,n=this.logs.find(function(e){return e.frame===t});n.text=e},e.prototype.createSaveData=function(e,t){var n={label:this.scene.label,variables:e,logs:this.logs.slice()};return t&&(n.description=t),n},e.prototype.pushLog=function(e){var t=this.logs.find(function(t){return t.frame===e});t||this.logs.push({frame:e})},e}();e.Scenario=s}(g.module.exports,g.module.require,g.module,g.filename,g.dirname);}